# 목표 !!
> 1. 꾸준한 공부
2. 공부한 내용 정리

***

<br/>

### 1.노드의 정의
Node.js 는 크롬V8 자바스크립트 엔진으로 빌드된 `자바스크립트 런타임` 이다.


_`런타임`이란 ? _
>특정 언어로 만든 프로그램들을 실행할 수 있게 해주는 일종의 `실행기`로 이해할 수 있다. 
자바스크립트 런타임은 자바스크립트 실행기.


#### 1-1. 노드의 가장 큰 업적 
> 자바스크립트의 확장. 브라우저와 HTML 로부터의 독립!! 

기존의 런타임은 웹 브라우저(크롬, 사파리 등) 였다.
자바스크립트는 브라우저와 HTML 아래 script 태그를 써야 사용이 가능해 HTML 에 종속되어 있었으나,노드가 있으면 브라우저와 HTML 이 없어도 자바스크립트의 사용이 가능하다!


***



### 2. 노드는 서버?
노드는 엄밀히 서버는 아니지다! 그러나 서버의 역할도 가능하다.
**서버 소스코드를 읽히면 서버가 된다.**

***
### 3. 노드의 내부 구조
속도가 빠르기 때문에 보통 내부는 `c` 나 `c++` 로 되어있다.
여기서 알아 둘 것은 c언어 기반의 라이브러리인 `libuv 비동기 i/o` 이다.
> **`libuv 비동기 i/o`** : 
노드는 노드의 특성인 이벤트 기반의 논블로킹 i/o 모델을 구현한 라이브러리 위에서 돌아간다. 초보들 마저 쉽게 비동기 프로그래밍이 가능하게 해줬다!

***
### 4. 노드의 특징

#### 4-1. 이벤트 기반
> 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식이다.
1. 이벤트 리스너에 콜백함수 등록
2. 시스템에서 이벤트 발생 (클릭 등)
3. 등록된 콜백 함수 호출
 
* 이벤트 예 : 클릭, 네트워크 요청, 타이머 등
* 이벤트 리스너 : 이벤트를 등록하는 함수
* 콜백 함수 : 이벤트가 발생했을 때 실행될 함수

 


#### 4-2. 논블로킹 I/O
동시가 아니다! 노드는 `블로킹이면서 동기`, `비동기면서 논블로킹`인 두가지만 있다.

* 논 블로킹 : 오래 걸리는 함수를 백그라운드로 보내서 다음 코드가 먼저 실행하게 하고
나중에 오래걸리는 함수를 실행.

> 동기면 코드가 순서대로 실행된다.
비동기면 코드가 순서대로 실행되지 않을 수도 있다.



#### 4-3. 프로세스 vs 스레드
* 프로세스 : 운영체제에서 할당하는 작업의 단위이다. 프로세스 간의 자원 공유는 없다.
* 스레드 : 프로세스 내에서 실행되는 작업의 단위이다. 부모 프로세스의 자원을 공유한다.

기본적으로 프로그램을 하나 띄우면 프로세스가 하나 뜬다.

> 노드 프로세스는 멀티 스레드이지만 **직접 다룰 수 있는 스레드는 하나 !**
돌아가는 여러 프로세스 중 **하나만!!!** 컨트롤 할 수 있다. 

그래서 노드를 싱글 스레드라고 표현한다.
멀티 스레딩은 좋지만 코딩이 너무 어렵다는 단점이 있다.
노드는 주로 멀티 스레드 대신 멀티 프로세스를 활용한다.


14버전부터 노드도 멀티 스레드 사용이 가능하다.
아직까지 많이 쓰이지는 않지만 할 수 있게 된건 할수 없는 것은 아주 다르다. 
***

### 5. 싱글 스레드
> 주어진 일을 **하나밖에** 처리하지 못한다.

싱글스레드 상황에서는 
블로킹이 발생하면 나머지 작업은 모두 대기해야 하므로 비효율적이다.

주방에 비유하면 1명의 점원(스레드)이 주문(요청), 서빙(응답)을 모두 담당하는 것.
점원이 한 명의 손님과 업무를 보게되면 다른 손님들은 대기하며 늘게된다.
<br/>
_여기서 타협한게 노드의 방식_
> 주문(요청)만 좍 받아놓고, 완료되면 고객에게 순차적으로 알림을 준다.
점원(스레드) 혹은 주방장이 지치는 순간 망한다.


* 싱글 스레드 모델 : 
에러를 처리하지 못하는 경우 멈추게되나,
프로그밍이 쉽고 cpu, 자원을 적게 사용한다.

* 멀티 스레드 모델 :
에러가 발생하면 새로운 스레드를 생성해 극복하나,
놀고 있는 스레드 처리에 비용이 발생하고, 프로그래밍이 어렵다.
스레드 수 만큼 자원을 많이 사용한다.

 **노드의 핵심은 싱글스레드를 어떻게 잘 활용하느냐 이다.**

***

### 6. 서버로서의 노드

> **노드 != 서버**
그치만 노드는 서버를 구성할 수 있게하는 모듈을 제공한다.

* 서버 : 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램.
* 클라이언트 : 서버에 요청을 보내는 주체(브라우저, 데스크탑 프로그램 , 모바일 앱, 다른 서버에 요청을 보내는 서버)

 예 ) 핸드폰(클라이언트)를 통해 앱스토어(서버)에서 앱 다운로드한다.

***

### 7. 노드의 장단점
* 멀티 스레드 방식에 비해 자원을 적게 사용하나,
cpu 코어를 하나만 사용한다.

* i/o 작업이 많은 서버로 적합하나,
cpu 작업이 많은 서버로는 부적합하다.

* 멀티 스레드방식보다 쉬우나,
하나뿐인 스레드가 멈추지 않도록 관리해야 한다.

* 웹 서버가 내장되어 있으나,
서버 규모가 커졌을 때 서버를 관리하기가 어렵다. --> _대부분의 서버의 단점이긴 하다._

* 자바스크립트를 사용하나,
성능이 어중간하다. 

* json 형식과 호환하기 쉽다. 이건 그냥 장점. 변환할 필요없이 그냥 실행하면 돌아간다.
